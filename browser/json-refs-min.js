!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.JsonRefs=e()}}(function(){var e;return function n(e,t,r){function i(f,s){if(!t[f]){if(!e[f]){var u="function"==typeof require&&require;if(!s&&u)return u(f,!0);if(o)return o(f,!0);var c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c}var a=t[f]={exports:{}};e[f][0].call(a.exports,function(n){var t=e[f][1][n];return i(t?t:n)},a,a.exports,n,e,t,r)}return t[f].exports}for(var o="function"==typeof require&&require,f=0;f<r.length;f++)i(r[f]);return i}({1:[function(e,n,t){(function(t){"use strict";function r(e,n){var t=h[e],r=Promise.resolve(),i=-1===e.indexOf(":")?void 0:e.split(":")[0];return d.isUndefined(t)?-1!==v.indexOf(i)||d.isUndefined(i)?(r=l.load(e,n),r=r.then(n.processContent?function(t){return n.processContent(t,e)}:JSON.parse),r=r.then(function(n){return h[e]=n,n})):r=r.then(function(){return Promise.reject(new Error("Unsupported remote reference scheme: "+i))}):r=r.then(function(){return t}),r=r.then(function(e){return d.cloneDeep(e)})}function i(e,n){var t=x(e);return m(n)&&(n=-1===n.indexOf("#")?"#":n.substring(n.indexOf("#"))),y(t.concat(x(n))).replace(/\/\$ref/g,"")}function o(e,n){var t=e.slice(0,e.lastIndexOf("allOf")),r=n[y(t)];return d.isUndefined(r)?t.indexOf("allOf")>-1?o(t,n):void 0:y(t)}function f(e,n,t){var r=[],i=d.isUndefined(n.depth)?1:n.depth,f=e.map(function(){var e,n=y(this.path),f=t[n];this.circular&&(r.push(n),d.isUndefined(f)&&(e=o(this.path,t),f=t[e]),d.isUndefined(f)||(f.circular=!0),this.update(0===i?{}:p(this.node).map(function(){this.circular&&this.parent.update({})})))});return d.each(r,function(e){var n,t=[],r=x(e),o=p(f).get(r);for(n=0;i>n;n++)t.push.apply(t,r),p(f).set(t,d.cloneDeep(o))}),f}function s(e,n){function t(t,r){var o=i(r,"#"),f=t=-1===t.indexOf("#")?"#":t.substring(t.indexOf("#")),s=x(f),u=!e.has(s),c=e.get(s),a=x(r),d=a.slice(0,a.length-1),l=n[o]||{ref:t};u?l.missing=!0:0===d.length?(e.value===c&&(c={},l.circular=!0),e.value=c):(e.get(d)===c&&(c={},l.circular=!0),e.set(d,c)),n[o]=l}d.each(g(e.value),function(e,n){m(e)||t(e,n)})}function u(e,n){function t(e){".."===e?i.pop():"."!==e&&i.push(e)}var r="#"!==n.charAt(0)&&-1===n.indexOf(":"),i=[],o=(n.indexOf("#")>-1?n.split("#")[0]:n).split("/");return e&&(e.indexOf("#")>-1&&(e=e.substring(0,e.indexOf("#"))),e.length>1&&"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),e.split("#")[0].split("/").forEach(t)),r?o.forEach(t):i=o,i.join("/")}function c(e,n,t){var r=p(e);return(d.isUndefined(n.resolveLocalRefs)||n.resolveLocalRefs)&&s(r,t),d.isUndefined(n.location)||d.each(t,function(e){var t=e.ref;0===t.indexOf(n.location)&&(t=t.substring(n.location.length),"/"===t.charAt(0)&&(t=t.substring(1))),e.ref=t}),{metadata:t,resolved:f(r,n,t)}}function a(e,n,t,o,f){function s(e,n,r,s,u){var c,a=r+("#"===s?"":s),l=i(t,e),h=f[l]||{},w=x(e);h.remote=!0,d.isUndefined(u)?(h.circular=!0,c=o[r].ref):(c=p(u).get(x(s)),d.isUndefined(c)?h.missing=!0:c.$ref?c=c.$ref:w.pop()),0===w.length?v.value=c:v.set(w,c),h.ref=a,f[l]=h}function l(){return{metadata:f,resolved:v.value}}var h=Promise.resolve(),v=p(e);return d.each(g(e),function(e,c){var l=b(e),p=m(e);(l&&(d.isUndefined(n.resolveFileRefs)||n.resolveFileRefs)||!l&&p&&(d.isUndefined(n.resolveRemoteRefs)||n.resolveRemoteRefs))&&(h=h.then(function(){var l=u(n.location,e),p=e.split("#"),h="#"+(p[1]||"");return d.isUndefined(o[l])?r(l,n).then(function(e){return e},function(e){return e}).then(function(r){var v=p[0],w=d.cloneDeep(n),y=i(t,c);return v=v.substring(0,v.lastIndexOf("/")+1),w.location=u(n.location,v),d.isError(r)?void(f[y]={err:r,missing:!0,ref:e}):(o[l]={ref:t},a(r,w,y,o,f).then(function(n){return delete o[l],s(c,e,l,h,n.resolved),n}))}):void s(c,e,l,h)}))}),h=h.then(function(){c(v.value,n,f)}).then(l,l)}"undefined"==typeof Promise&&e("native-promise-only");var d=e("./lib/utils"),l="undefined"!=typeof window?window.PathLoader:"undefined"!=typeof t?t.PathLoader:null,p="undefined"!=typeof window?window.traverse:"undefined"!=typeof t?t.traverse:null,h={},v=["file","http","https"];n.exports.clearCache=function(){h={}};var w=n.exports.isJsonReference=function(e){return d.isPlainObject(e)&&d.isString(e.$ref)},y=n.exports.pathToPointer=function(e){if(d.isUndefined(e))throw new Error("path is required");if(!d.isArray(e))throw new Error("path must be an array");var n="#";return e.length>0&&(n+="/"+e.map(function(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")),n},g=n.exports.findRefs=function(e){if(d.isUndefined(e))throw new Error("json is required");if(!d.isArray(e)&&!d.isPlainObject(e))throw new Error("json must be an array or an object");return p(e).reduce(function(e){var n=this.node;return"$ref"===this.key&&w(this.parent.node)&&(e[y(this.path)]=n),e},{})},m=n.exports.isRemotePointer=function(e){if(d.isUndefined(e))throw new Error("ptr is required");if(!d.isString(e))throw new Error("ptr must be a string");return""!==e&&"#"!==e.charAt(0)},b=n.exports.isFilePointer=function(e){return m(e)&&!/^[a-zA-Z]+:\/\//.test(e)},x=n.exports.pathFromPointer=function(e){if(d.isUndefined(e))throw new Error("ptr is required");if(!d.isString(e))throw new Error("ptr must be a string");var n=[],t=["","#","#/"];return m(e)?n=e:-1===t.indexOf(e)&&"#"===e.charAt(0)&&(n=e.substring(e.indexOf("/")).split("/").reduce(function(e,n){return""!==n&&e.push(n.replace(/~0/g,"~").replace(/~1/g,"/")),e},[])),n};n.exports.resolveLocalRefs=function(e,n){d.isUndefined(n)&&(n={});var t,r={};if(d.isUndefined(e))throw new Error("json is required");if(!d.isArray(e)&&!d.isPlainObject(e))throw new Error("json must be an array or an object");if(!d.isPlainObject(n))throw new Error("options must be an object");if(!d.isUndefined(n.depth)&&!d.isNumber(n.depth))throw new Error("options.depth must be a number");if(!d.isUndefined(n.depth)&&n.depth<0)throw new Error("options.depth must be greater or equal to zero");return e=p(e).clone(),n=p(n).clone(),t=p(e),s(t,r),{metadata:r,resolved:f(t,n,r)}},n.exports.resolveRefs=function(e,n,t){var r=Promise.resolve();return 2===arguments.length&&d.isFunction(n)&&(t=n,n={}),d.isUndefined(n)&&(n={}),r=r.then(function(){if(d.isUndefined(e))throw new Error("json is required");if(!d.isArray(e)&&!d.isPlainObject(e))throw new Error("json must be an array or an object");if(!d.isPlainObject(n))throw new Error("options must be an object");if(!d.isUndefined(t)&&!d.isFunction(t))throw new Error("done must be a function");if(!d.isUndefined(n.processContent)&&!d.isFunction(n.processContent))throw new Error("options.processContent must be a function");if(!d.isUndefined(n.prepareRequest)&&!d.isFunction(n.prepareRequest))throw new Error("options.prepareRequest must be a function");if(!d.isUndefined(n.location)&&!d.isString(n.location))throw new Error("options.location must be a string");if(!d.isUndefined(n.depth)&&!d.isNumber(n.depth))throw new Error("options.depth must be a number");if(!d.isUndefined(n.depth)&&n.depth<0)throw new Error("options.depth must be greater or equal to zero");if(!d.isUndefined(n.resolveLocalRefs)&&!d.isBoolean(n.resolveLocalRefs))throw new Error("options.resolveLocalRefs must be a boolean");if(!d.isUndefined(n.resolveRemoteRefs)&&!d.isBoolean(n.resolveRemoteRefs))throw new Error("options.resolveRemoteRefs must be a boolean");if(!d.isUndefined(n.resolveFileRefs)&&!d.isBoolean(n.resolveFileRefs))throw new Error("options.resolveFileRefs must be a boolean")}),e=p(e).clone(),n=p(n).clone(),r=r.then(function(){return a(e,n,"#",{},{})}).then(function(e){return c(e.resolved,n,e.metadata)}),!d.isUndefined(t)&&d.isFunction(t)&&(r=r.then(function(e){t(void 0,e.resolved,e.metadata)},function(e){t(e)})),r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/utils":2,"native-promise-only":3}],2:[function(e,n,t){(function(e){"use strict";function t(e,n){return Object.prototype.toString.call(e)==="[object "+n+"]"}var r="undefined"!=typeof window?window.traverse:"undefined"!=typeof e?e.traverse:null;n.exports.cloneDeep=function(e){return r(e).clone()};var i=n.exports.isArray=function(e){return t(e,"Array")};n.exports.isBoolean=function(e){return t(e,"Boolean")},n.exports.isError=function(e){return t(e,"Error")},n.exports.isFunction=function(e){return t(e,"Function")},n.exports.isNumber=function(e){return t(e,"Number")};var o=n.exports.isPlainObject=function(e){return t(e,"Object")};n.exports.isString=function(e){return t(e,"String")},n.exports.isUndefined=function(e){return"undefined"==typeof e},n.exports.each=function(e,n){i(e)?e.forEach(n):o(e)&&Object.keys(e).forEach(function(t){n(e[t],t)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(n,t,r){(function(n){!function(n,r,i){r[n]=r[n]||i(),"undefined"!=typeof t&&t.exports?t.exports=r[n]:"function"==typeof e&&e.amd&&e(function(){return r[n]})}("Promise","undefined"!=typeof n?n:this,function(){"use strict";function e(e,n){l.add(e,n),d||(d=h(l.drain))}function n(e){var n,t=typeof e;return null==e||"object"!=t&&"function"!=t||(n=e.then),"function"==typeof n?n:!1}function t(){for(var e=0;e<this.chain.length;e++)r(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function r(e,t,r){var i,o;try{t===!1?r.reject(e.msg):(i=t===!0?e.msg:t.call(void 0,e.msg),i===r.promise?r.reject(TypeError("Promise-chain cycle")):(o=n(i))?o.call(i,r.resolve,r.reject):r.resolve(i))}catch(f){r.reject(f)}}function i(r){var f,u=this;if(!u.triggered){u.triggered=!0,u.def&&(u=u.def);try{(f=n(r))?e(function(){var e=new s(u);try{f.call(r,function(){i.apply(e,arguments)},function(){o.apply(e,arguments)})}catch(n){o.call(e,n)}}):(u.msg=r,u.state=1,u.chain.length>0&&e(t,u))}catch(c){o.call(new s(u),c)}}}function o(n){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=n,r.state=2,r.chain.length>0&&e(t,r))}function f(e,n,t,r){for(var i=0;i<n.length;i++)!function(i){e.resolve(n[i]).then(function(e){t(i,e)},r)}(i)}function s(e){this.def=e,this.triggered=!1}function u(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function c(n){if("function"!=typeof n)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new u(this);this.then=function(n,i){var o={success:"function"==typeof n?n:!0,failure:"function"==typeof i?i:!1};return o.promise=new this.constructor(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");o.resolve=e,o.reject=n}),r.chain.push(o),0!==r.state&&e(t,r),o.promise},this["catch"]=function(e){return this.then(void 0,e)};try{n.call(void 0,function(e){i.call(r,e)},function(e){o.call(r,e)})}catch(f){o.call(r,f)}}var a,d,l,p=Object.prototype.toString,h="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),a=function(e,n,t,r){return Object.defineProperty(e,n,{value:t,writable:!0,configurable:r!==!1})}}catch(v){a=function(e,n,t){return e[n]=t,e}}l=function(){function e(e,n){this.fn=e,this.self=n,this.next=void 0}var n,t,r;return{add:function(i,o){r=new e(i,o),t?t.next=r:n=r,t=r,r=void 0},drain:function(){var e=n;for(n=t=d=void 0;e;)e.fn.call(e.self),e=e.next}}}();var w=a({},"constructor",c,!1);return c.prototype=w,a(w,"__NPO__",0,!1),a(c,"resolve",function(e){var n=this;return e&&"object"==typeof e&&1===e.__NPO__?e:new n(function(n,t){if("function"!=typeof n||"function"!=typeof t)throw TypeError("Not a function");n(e)})}),a(c,"reject",function(e){return new this(function(n,t){if("function"!=typeof n||"function"!=typeof t)throw TypeError("Not a function");t(e)})}),a(c,"all",function(e){var n=this;return"[object Array]"!=p.call(e)?n.reject(TypeError("Not an array")):0===e.length?n.resolve([]):new n(function(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");var i=e.length,o=Array(i),s=0;f(n,e,function(e,n){o[e]=n,++s===i&&t(o)},r)})}),a(c,"race",function(e){var n=this;return"[object Array]"!=p.call(e)?n.reject(TypeError("Not an array")):new n(function(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");f(n,e,function(e,n){t(n)},r)})}),c})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});